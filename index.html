<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lebenszeitrechner</title>
</head>
<body>
  <h2>Welcome to see your lifetime!</h2>
  <label>You only have to enter your date of birth and time:</label>
    <input type="date" class="birth-date-js">
    <input type="time" class="birth-time-js" onkeyup="
      startPastLifeFunc();
    ">
    <button class="see-past-time-button-js">see past lifetime</button>
  <p>ps. this is just for javascript practice. So please don't be offended by the lack of CSS in this project.</p>

  <div>
    <div class="milliseconds-div"></div>
    <div class="seconds-div"></div>
    <div class="minutes-div"></div>
    <div class="hours-div"></div>
    <div class="days-div"></div>
    <div class="weeks-div"></div>
    <div class="month-div"></div>
    <div class="years-div"></div>
    <div class="decades-div"></div>
  </div>
  
  <script>
    let nowTime;

    document.querySelector('.see-past-time-button-js')
    .addEventListener('click', () => {
      startPastLifeFunc(true);
    });
    
    
    function diffToNowTime(func) {
      nowTime = new Date();
      const year = nowTime.getFullYear();
      const month = nowTime.getMonth() + 1;
      const day = nowTime.getDate();
      const hour = nowTime.getHours();
      const minute = nowTime.getMinutes();
      const seconds = nowTime.getSeconds();

      const nowTimeInSeconds = seconds + (minute * 60) + (hour * 60 * 60) + (day * 60 * 60 *24) + (month * 60 * 60 * 24 * 30) + (year * 60 * 60 * 24 * 30 * 12);

            
      const timeDiffInSeconds = nowTimeInSeconds - func;

      // console.log(timeDiffInSeconds);

      return timeDiffInSeconds;
    };

    function saveUserInputs() {
      const birthDateInput = document.querySelector('.birth-date-js');
      const birthTimeInput = document.querySelector('.birth-time-js');
      
      userBirthDate = new Date(birthDateInput.value);
      userBirthTime = birthTimeInput.value;
      const [inputHour, inputMinute] = userBirthTime.split(":");
      
      const year = userBirthDate.getFullYear();
      const month = userBirthDate.getMonth() + 1;
      const day = userBirthDate.getDate();
      const hour = Number(inputHour);
      const minute = Number(inputMinute);

      const birthTimeInSeconds = (minute * 60) + (hour * 60 * 60) + (day * 60 * 60 * 24) + (month * 60 * 60 * 24 * 30) + (year * 60 * 60 * 24 * 30 * 12);
       
      return birthTimeInSeconds;
    };

    function putOutOnPastTimeDivs(func) {
      const seconds = document.querySelector('.seconds-div');
      const minutes = document.querySelector('.minutes-div');
      const hours = document.querySelector('.hours-div');
      const days = document.querySelector('.days-div');
      const weeks = document.querySelector('.weeks-div');
      const month = document.querySelector('.month-div');
      const years = document.querySelector('.years-div');
      const decades = document.querySelector('.decades-div');

      console.log('interval is running');

      
      seconds.innerHTML = func + ' seconds';
      minutes.innerHTML = Math.round(func / 60) + ' minutes';
      hours.innerHTML = Math.round(func / 60 / 60) + ' hours';
      days.innerHTML = Math.round(func / 60 / 60 / 24) + ' days';
      weeks.innerHTML = Math.round(func / 60 / 60 / 24 / 7) + ' weeks';
      month.innerHTML = Math.round(func / 60 / 60 / 24 / 30) + ' month';
      years.innerHTML = Math.round(func / 60 / 60 / 24 / 365) + ' years';
      decades.innerHTML = Math.round(func / 60 / 60 /24 /365 / 10) + ' decades';
    }
    
    function startPastLifeFunc(boolean) {
      // console.log(event.key);
      if(event.key === 'Enter' || boolean) {
        saveUserInputs();
        setInterval(() => { // I don't know why, but the interval doesn't run
          saveUserInputs();
          diffToNowTime();
          putOutOnPastTimeDivs(diffToNowTime(saveUserInputs()));
        }, 1000);
      }
    }
  </script>
</body>
</html>